(window.webpackJsonpframes_dashboard=window.webpackJsonpframes_dashboard||[]).push([["dashboard/views/Login"],{103:function(e,o,t){var i=t(109);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t(4).default)("3e07908e",i,!1,{})},106:function(e,o,t){e.exports=t.p+"img/b7c69a18e8f62fb9a106e720960f2c4f.png"},107:function(e,o,t){e.exports=t.p+"img/c15ccff60166c61d0c33bb122020777e.png"},108:function(e,o,t){"use strict";var i=t(103);t.n(i).a},109:function(e,o,t){o=e.exports=t(3)(!1);var i=t(14),n=i(t(110)),r=i(t(111)),a=i(t(112)),s=i(t(113)),c=i(t(114)),l=i(t(115));o.push([e.i,".tips{font-size:14px;color:#fff;margin-bottom:5px}.border-blue{border-color:#409EFF !important}.login-body{height:100%;background-color:#ebf4ff}.login-container{height:100%;background:url("+n+") no-repeat;background-size:100% 55%}.login-container input:-webkit-autofill{-webkit-box-shadow:0 0 0 1000px white inset !important;margin-left:15px;margin-top:1px;width:240px;padding-left:0}.login-container input{background:transparent;border:0;-webkit-appearance:none;border-radius:0;color:#161b26;height:40px !important;line-height:40px !important}.login-container .el-input{display:inline-block;height:42px;width:88%;margin-left:18px;line-height:42px}.login-container .svg-container{padding:6px 5px 6px 12px;color:#4287ff}.login-container .svg-container.pwd{margin-right:2px}.login-container .svg-container i{position:absolute;top:7px}.login-container .svg-container i.ka-mobile{background:url("+r+") no-repeat}.login-container .svg-container i.ka-unlock{background:url("+a+") no-repeat}.login-container .title{font-size:42px;font-weight:400;color:#eeeeee;margin:0 -58px 40px;text-align:center;font-weight:bold}.login-container .qr-code-right{position:absolute;right:32px;top:32px}.login-container .qr-code-right .qr-code-login{position:absolute;top:0px;right:46px;width:70px;height:28px;line-height:28px;text-align:center;font-size:12px;border:1px solid #8eb7ff;color:#4287ff;background-color:#f4f8ff}.login-container .qr-code-right .qr-code-login i{position:absolute;top:4px;right:-9px;font-size:24px;color:#7fafff}.login-container .qr-code-right img{cursor:pointer}.login-container h4{padding-top:64px;padding-left:97px;font-size:20px;color:#161b26;margin-bottom:6px}.login-container .login-layout{background:#fff;height:444px;position:relative}.login-container .login-layout .form-error{background:#ffe5eb url("+s+") no-repeat 10px 4px;margin-left:10px;padding-left:39px;line-height:28px;font-size:12px;color:#454e67;margin-bottom:10px;width:320px;margin-left:97px}.login-container .login-layout .form-empty{height:28px}.login-container .login-qr-code{position:relative;background:#fff;width:514px;height:444px;text-align:center}.login-container .login-qr-code h4{text-align:left}.login-container .login-qr-code .qr-code-scan{margin-top:48px}.login-container .login-qr-code .qr-code-scan-data{margin-top:20px}.login-container .login-qr-code .qr-code-scan-data img+div{display:inline-block}.login-container .login-qr-code .qr-code-scan-data img+div>div{height:20px;font-size:14px;color:#9ba3b9;text-align:left}.login-container .login-qr-code .upload-register{margin-top:30px;font-size:14px;color:#454e67;text-align:right;padding-right:100px}.login-container .login-form{width:514px;margin:auto;padding-top:120px}.login-container .el-form-item{border:1px solid #9ba3b9;background:#fff;border-radius:0;color:#454545;width:320px;margin-left:97px;margin-bottom:26px}.login-container .el-form-item.form-button,.login-container .el-form-item.form-check{border-width:0;margin-top:-10px}.login-container .el-form-item.form-check .el-checkbox__label{color:#9ba3b9;font-size:14px}.login-container .el-button--primary{background-color:#4287ff;border-color:#4287ff}.login-container .el-button{line-height:42px;padding:0 12px;border-width:0;font-size:16px}.login-container footer{text-align:center;width:100%;font-size:14px;color:#8d96af;line-height:28px;padding-top:50px;margin-bottom:50px}.login-container footer .qr-code{line-height:12px;padding-bottom:10px}.login-container .shade .projection{position:absolute;width:45px;height:165px;bottom:0}.login-container .shade .projection.left{left:-42px;background:url("+c+") no-repeat}.login-container .shade .projection.right{right:-42px;background:url("+l+") no-repeat}@media screen and (max-height: 768px){body{min-height:700px;overflow:auto;background-size:100% 60%}.login-container .login-form{padding-top:30px}.login-container .title{margin:0 -58px 20px}.login-container .login-layout,.login-container .login-qr-code{height:405px}.login-container .login-qr-code .qr-code-scan{margin-top:28px}.login-container footer{padding-top:20px}}.refresh{position:absolute;top:0;left:50%;transform:translate(-50%, 0);width:140px;height:140px;background:rgba(0,0,0,0.6);display:flex;align-items:center;color:#fff;justify-content:center;flex-direction:column}.refresh button.el-button{line-height:36px;margin-top:10px}\n",""])},110:function(e,o,t){e.exports=t.p+"img/8972aa8cff96be3f2ee230c39e6a21e5.jpg"},111:function(e,o,t){e.exports=t.p+"img/84aaab6c4e20488fe0bb4328cbede31f.png"},112:function(e,o,t){e.exports=t.p+"img/de4914cff988faddfb3a3c5de6c43f51.png"},113:function(e,o,t){e.exports=t.p+"img/617c3c071f223529096707f3ebd3ee1d.png"},114:function(e,o,t){e.exports=t.p+"img/24607d391bbd9ea2160b5175a8ad89b0.png"},115:function(e,o,t){e.exports=t.p+"img/15e45b11842b93ff1b0f1ae314880b15.png"},122:function(e,o,t){"use strict";t.r(o);var i=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"login-container"},[i("el-form",{ref:"loginForm",staticClass:"card-box login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"off","label-position":"left","label-width":"0px"}},[i("h3",{staticClass:"title"},[i("img",{attrs:{src:t(106)}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowLogin,expression:"isShowLogin"}],staticClass:"login-layout shade"},[i("div",{staticClass:"projection left"}),e._v(" "),i("div",{staticClass:"projection right"}),e._v(" "),e._e(),e._v(" "),i("h4",[e._v("密码登录")]),e._v(" "),i("div",{staticClass:"form-empty"}),e._v(" "),i("el-form-item",{class:e.isChangeColorUserName?"border-blue":"",attrs:{prop:"username"}},[i("span",{staticClass:"svg-container"},[i("i",{staticClass:"ka ka-mobile"})]),e._v(" "),i("el-input",{attrs:{clearable:"",size:"small",name:"username",type:"text","auto-complete":"off",autocomplete:"off",placeholder:"请输入账号"},on:{blur:function(o){e.changeColorUserName(!1)},focus:function(o){e.changeColorUserName(!0)}},model:{value:e.loginForm.username,callback:function(o){e.$set(e.loginForm,"username",o)},expression:"loginForm.username"}})],1),e._v(" "),i("el-form-item",{class:e.isChangeColorPassword?"border-blue":"",attrs:{prop:"password"}},[i("span",{staticClass:"svg-container pwd"},[i("i",{staticClass:"ka ka-unlock"})]),e._v(" "),i("el-input",{attrs:{clearable:"",size:"small",name:"password",type:"password","auto-complete":"off",autocomplete:"off",placeholder:"请输入登录密码"},on:{blur:function(o){e.changeColorPassword(!1)},focus:function(o){e.changeColorPassword(!0)}},nativeOn:{keyup:function(o){return!("button"in o)&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:(o.preventDefault(),e.handleLogin(o))}},model:{value:e.loginForm.password,callback:function(o){e.$set(e.loginForm,"password",o)},expression:"loginForm.password"}})],1),e._v(" "),i("el-form-item",{staticClass:"form-check"},[i("el-checkbox",{model:{value:e.checked,callback:function(o){e.checked=o},expression:"checked"}},[e._v("记住密码")])],1),e._v(" "),i("el-form-item",{staticClass:"form-button"},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(o){return o.preventDefault(),e.handleLogin(o)}}},[e._v("\n          立即登录\n        ")])],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShowLogin,expression:"!isShowLogin"}],staticClass:"login-qr-code shade"},[i("div",{staticClass:"projection left"}),e._v(" "),i("div",{staticClass:"projection right"}),e._v(" "),e._e(),e._v(" "),i("h4",[e._v("扫码登录")]),e._v(" "),i("div",{staticClass:"qr-code-scan"},[i("div",{staticStyle:{position:"relative"}},[i("img",{attrs:{src:e.codeImage,width:"140",height:"140"}}),e._v(" "),e.isExpired?i("div",{staticClass:"refresh"},[i("p",[e._v("二维码已过期")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.primary}},[e._v("刷新")])],1):e._e()]),e._v(" "),i("div",{staticClass:"qr-code-scan-data"},[i("img",{attrs:{src:t(107)}}),e._v(" "),i("div",{staticClass:"scan"},[i("div",[e._v("打开管理APP")]),e._v(" "),i("div",[e._v("扫一扫登录")])])])]),e._v(" "),i("div",{staticClass:"upload-register"},[i("router-link",{attrs:{to:"#"}},[e._v("下载APP")]),e._v("    "),i("router-link",{attrs:{to:"/"}},[e._v("免费注册")])],1)])]),e._v(" "),i("basic-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.showDialog,title:"第三方验证"},on:{"update:visible":function(o){e.showDialog=o}}},[e._v("\n    邮箱登录成功,请选择第三方验证\n    "),i("social-sign")],1),e._v(" "),e._m(0)],1)};i._withStripped=!0;var n=t(37),r=t.n(n),a=t(39),s=t.n(a),c=t(8),l=t(11),g=t(10),p=t(2),d=t(17),f={name:"Login",data:function(){return{checked:!1,isShowLogin:!0,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,validator:function(e,o,t){Object(l.c)(e,o,t,!0,["账号",1,30])},trigger:"change"}],password:[{required:!0,trigger:"change",validator:function(e,o,t){Object(l.c)(e,o,t,!0,["密码",6,18])}}]},codeImage:"",loginId:"",isExpired:!1,showDialog:!1,redirect:void 0,isChangeColorUserName:!1,isChangeColorPassword:!1}},watch:{$route:{handler:function(e){var o=e.query;o&&(this.redirect=o.redirect,this.otherQuery=this.getOtherQuery(o))},immediate:!0},isShowLogin:function(e){e?Object(d.a)():(console.log(1223),this.getCode())}},mounted:function(){var e=localStorage.getItem("username"),o=localStorage.getItem("password");e?(this.checked=!0,this.loginForm.username=e,this.loginForm.password=o):(this.checked=!1,this.loginForm.username="",this.loginForm.password="")},created:function(){var e=document.getElementsByTagName("body")[0];Object(g.a)("login-body",e)},destroyed:function(){},beforeRouteLeave:function(e,o,t){Object(d.a)(),t()},methods:{changeColorUserName:function(e){this.isChangeColorUserName=e},changeColorPassword:function(e){this.isChangeColorPassword=e},getOtherQuery:function(e){return Object.keys(e).reduce((function(o,t){return"redirect"!==t&&(o[t]=e[t]),o}),{})},getCode:function(e){var o=this;Object(d.b)().then((function(t){o.codeImage="data:image/png;base64,".concat(t.image),o.loginId=t.loginId,o.isExpired=!1,e||o.qrcodeLoginCheck()}))},qrcodeLoginCheck:function(){var e=this;Object(d.g)(this.loginId).then((function(o){"waiting"==o.stats?e.qrcodeLoginCheck():o.success||"ok"==o.stats?(Object(p.f)(o.token),e.$router.push({name:"custormMenuManager",query:e.otherQuery})):"refresh"==o.stats&&(e.isExpired=!0)}))},primary:function(){Object(d.a)(),this.getCode()},handleLogin:function(){var e=this;console.log(this),this.$refs.loginForm.validate((function(o){if(!o)return!1;e.$store.dispatch("LoginByPhone",e.loginForm).then(function(){var o=s()(r.a.mark((function o(t){return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:200===t.status?(e.checked?(localStorage.setItem("username",e.loginForm.username),localStorage.setItem("password",e.loginForm.password)):(localStorage.setItem("username",""),localStorage.setItem("password","")),e.$store.dispatch("IsSourceLogin",!0),e.$store.dispatch("IsLoadMenuData",!1),e.$router.push({path:"/",query:e.otherQuery})):(localStorage.setItem("username",""),localStorage.setItem("password",""),Object(c.Message)({message:t.message,type:"error"}));case 1:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){localStorage.setItem("username",""),localStorage.setItem("password",""),console.log(e)}))}))},afterQRScan:function(){},handleQRCodeShow:function(e){this.isShowLogin=!!e}}},h=(t(108),t(1)),u=Object(h.a)(f,i,[function(){var e=this.$createElement,o=this._self._c||e;return o("footer",[o("div",[this._v("建议使用最新谷歌浏览器，最低屏幕分辨率1024*768")]),this._v(" "),o("div",[this._v("Copyright © 2019 成都起步传奇科技有限公司 All rights reserved "),o("a",{attrs:{target:"_blank",href:"http://www.beian.miit.gov.cn"}},[this._v("蜀ICP备15012987号")])])])}],!1,null,null,null);u.options.__file="src/frames/dashboard/views/user/login/index.vue";o.default=u.exports}}]);