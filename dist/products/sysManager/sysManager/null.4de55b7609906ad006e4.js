(window.webpackJsonpproducts_sysManager=window.webpackJsonpproducts_sysManager||[]).push([["sysManager/null"],{11:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"margin-top0"},[n("el-button",{attrs:{disabled:e.disabledAuthority,type:"primary",size:"small",icon:"el-icon-if-save-permissions",plain:""},on:{click:e.updateAuthorityDialog}},[e._v("保存权限\n    ")])],1),e._v(" "),n("el-row",{staticClass:"margin-top-10"},[n("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:7}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入关键字",size:"small"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),n("el-tree",{ref:"menuTree",staticClass:"filter-tree treeGray",attrs:{"node-key":e.getTreeNodeKey,data:e.treeData,props:e.defaultProps,"filter-node-method":e.filterNode,"default-expand-all":!1,"show-checkbox":"","highlight-current":""},on:{"node-click":e.getNodeData}})],1),e._v(" "),n("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:17}},[n("el-table",{ref:"elementTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",height:"536"},on:{select:e.handleSelectionChange,"select-all":e.handleSelectionAllChange}},[e.groupManagerElement?n("el-table-column",{attrs:{align:"center",type:"selection",width:"40"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{width:"200px",label:"资源编码",align:"left","header-align":"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              "+e._s(t.row.code))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"80px",align:"center",label:"资源类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              "+e._s(t.row.type))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"160px",label:"资源名称",align:"left","header-align":"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              "+e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"160px",label:"资源地址",align:"left","header-align":"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              "+e._s(t.row.uri))])]}}])}),e._v(" "),n("el-table-column",{attrs:{width:"120px",align:"center",label:"资源请求类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n              "+e._s(t.row.method))])]}}])})],1)],1)],1)],1)};r._withStripped=!0;var i=n(6),a=n.n(i),o=n(40),s=n(41),l=n(30),u=n(21),c=n(25);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f={name:"GroupAuthority",props:{groupId:{type:String,default:"1"},params:Object},data:function(){return{filterText:"",list:null,total:null,modelSearchFilter:{name:void 0},treeData:[],defaultProps:{children:"children",label:"title"},groupManagerElement:!1,selectData:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(c.mapState)({elements:function(e){return e.user.login.elements}}),{disabledAuthority:function(){return!(!this.$utils.length(this.params)||1!=this.params.groupType)}}),watch:{filterText:function(e){this.$refs.menuTree.filter(e)}},created:function(){this.getList(),this.groupManagerElement=this.elements["groupManager:element"]},methods:{disabledTree:function(e,t){if(u.a.nodeId.includes(this.groupId)&&u.a.nodeId.includes(e.id))return!0},getList:function(){var e=this;Object(o.c)(this.modelSearchFilter).then((function(t){e.treeData=t.data,e.initAuthoritys()}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getNodeData:function(e){var t=this;this.modelSearchFilter.menuId=e.id,Object(s.d)(this.modelSearchFilter).then((function(e){t.list=e.data.rows,Object(l.f)(t.groupId).then((function(e){for(var n={},r=0;r<t.list.length;r++)n[t.list[r].id]=t.list[r];for(var i={},a=0;a<e.data.length;a++){var o=e.data[a];void 0!==n[o]&&void 0===i[o]&&(t.$refs.elementTable.toggleRowSelection(n[e.data[a]]),i[o]=!0)}}))})),this.currentId=e.id,this.showElement=!0},getTreeNodeKey:function(e){return e.id},handleSelectionAllChange:function(e,t){if(!t&&e.length==this.list.length)for(var n=0;n<e.length;n++)Object(l.a)(this.groupId,{menuId:this.currentId,elementId:e[n].id});if(!t&&0==e.length)for(var r=0;r<this.list.length;r++)Object(l.n)(this.groupId,{menuId:this.currentId,elementId:this.list[r].id})},handleSelectionChange:function(e,t){for(var n=!0,r=0;r<e.length;r++)if(e[r].id===t.id){Object(l.a)(this.groupId,{menuId:this.currentId,elementId:t.id}),n=!1;break}n&&Object(l.n)(this.groupId,{menuId:this.currentId,elementId:t.id})},clickGroupAuthorityCancel:function(){this.$emit("closeAuthorityDialog")},update:function(){var e=this;this.$emit("closeAuthorityDialog");for(var t=this.$refs.menuTree.getCheckedNodes(),n=[],r=0;r<t.length;r++)n.push(t[r].id);Object(l.k)(this.groupId,n).then((function(){e.$message({title:"成功",message:"保存成功",type:"success",duration:2e3})}))},initAuthoritys:function(){var e=this;Object(l.g)(this.groupId).then((function(t){e.selectData=[];for(var n=0;n<t.data.length;n++)e.selectData.push(t.data[n].id);e.$nextTick((function(){e.$refs.menuTree.setCheckedKeys(e.selectData)}))}))},updateAuthorityDialog:function(){var e=this.$refs.menuTree.getCheckedKeys();this.$utils.isEmpty(e)?this.$message({message:"亲，请先分配权限！",type:"warning"}):this.update()}}},p=(n(48),n(16)),h=Object(p.a)(f,r,[],!1,null,"af4e8092",null);h.options.__file="src/products/sysManager/views/groupAuth/group/components/groupAuthority.vue";t.default=h.exports},20:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},22:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=a[0],s={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return p}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,u=!1,c=function(){},d=null,f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,i){u=n,d=i||{};var o=r(e,t);return h(o),function(t){for(var n=[],i=0;i<o.length;i++){var s=o[i];(l=a[s.id]).refs--,n.push(l)}t?h(o=r(e,t)):o=[];for(i=0;i<n.length;i++){var l;if(0===(l=n[i]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete a[l.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=a[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(g(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(g(n.parts[i]));a[n.id]={id:n.id,refs:1,parts:o}}}}function m(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function g(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(u)return c;r.parentNode.removeChild(r)}if(f){var i=l++;r=s||(s=m()),t=y.bind(null,r,i,!1),n=y.bind(null,r,i,!0)}else r=m(),t=w.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var v,b=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function w(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),d.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},40:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return u}));var r=n(17);function i(e){return Object(r.a)({url:"/api/admin/menu/menuTree",method:"get",params:e})}function a(e){return Object(r.a)({url:"/api/admin/menu",method:"post",data:e})}function o(e){return Object(r.a)({url:"/api/admin/menu/"+e,method:"get"})}function s(e){return Object(r.a)({url:"/api/admin/menu/"+e,method:"delete"})}function l(e,t){return Object(r.a)({url:"/api/admin/menu/"+e,method:"put",data:t})}function u(){return Object(r.a)({url:"/api/admin/sysCrmProductInfo/all",method:"get"})}},41:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return l}));var r=n(17);function i(e){return Object(r.a)({url:"/api/admin/element/list",method:"get",params:e})}function a(e){return Object(r.a)({url:"/api/admin/element",method:"post",data:e})}function o(e){return Object(r.a)({url:"/api/admin/element/"+e,method:"get"})}function s(e){return Object(r.a)({url:"/api/admin/element/"+e,method:"delete"})}function l(e,t){return Object(r.a)({url:"/api/admin/element/"+e,method:"put",data:t})}},42:function(e,t,n){var r=n(49);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(22).default)("777e3281",r,!1,{})},48:function(e,t,n){"use strict";var r=n(42);n.n(r).a},49:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".el-tree[data-v-af4e8092]{height:500px;overflow-y:auto}\n",""])}}]);