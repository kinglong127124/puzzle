(window.webpackJsonpproducts_custormManager=window.webpackJsonpproducts_custormManager||[]).push([["custormManager/null"],{88:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-container"},[a("basic-handler",[a("span",{directives:[{name:"show",rawName:"v-show",value:e.isShowChecked,expression:"isShowChecked"}]},[e.defaultExpandAll?e._e():a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-if-open",plain:""},on:{click:e.clickDefaultExpandAll}},[e._v("全部展开\n      ")]),e._v(" "),e.defaultExpandAll?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-if-fold",plain:""},on:{click:e.clickDefaultExpandAll}},[e._v("全部折叠\n      ")]):e._e()],1),e._v(" "),e.defaultCheckAll?e._e():a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-check",plain:""},on:{click:e.clickCheckedAll}},[e._v("全选\n    ")]),e._v(" "),e.defaultCheckAll?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-close",plain:""},on:{click:e.clickCheckedAll}},[e._v("取消全选\n    ")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",plain:""},on:{click:e.clickRefresh}},[e._v("刷新")]),e._v(" "),a("basic-search",{ref:"refBasicSearch",attrs:{"model-search-filter":e.modelSearchFilter},on:{clickSearchFilter:e.clickSearchFilter}})],1),e._v(" "),a("basic-table-tree",{ref:"refTreeData",attrs:{"default-expand-all":e.defaultExpandAll,"default-check-all":e.defaultCheckAll,data:e.basicTree.treeData,columns:e.basicTree.treeColumns,"filter-node-method":e.filterNodeMethod,height:400},on:{"selection-change":e.selectionChangeMenu,"current-change":e.currentChangeMenu},scopedSlots:e._u([{key:"ifCanOverflow",fn:function(t){return[e._v("\n      "+e._s(e.formatIsOrNot(t.scope.row.ifCanOverflow))+"\n    ")]}},{key:"isAlreadyOverflow",fn:function(t){return[e._v("\n      "+e._s(e.formatIsOrNot(t.scope.row.isAlreadyOverflow))+"\n    ")]}}])})],1)};r._withStripped=!0;var l=a(5),i=a.n(l),n=a(55),c=a(56),s=a(59),o=a(58),d=a(8);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var f={name:"DialogMenu",mixins:[n.a,c.a,s.a,o.a],props:{data:{type:Array,required:!1,default:function(){return[]}},isShowChecked:{type:Boolean,default:!1},params:{type:Object,default:function(){}}},data:function(){return{pageInfo:{productAlias:"smartpm",pageCode:"sysCrmUserInfo",pageName:"客户管理"},defaultExpandAll:!1,defaultCheckAll:!1,filterText:"",basicTree:{treeDataAll:[],treeData:[],treeColumns:[{expand:!0,checkbox:!0,text:"菜单名称",value:"title",minWidth:160,align:"left",headerAlign:"center",showOverflowTooltip:!0},{text:"是否可配审批流程",value:"ifCanOverflow",width:140,align:"center"},{text:"是否已配审批流程",value:"isAlreadyOverflow",width:140,align:"center"}],selectedRows:[],selectedIdArray:[],selectedAll:[]},modelSearchFilter:{fuzzy:"",fuzzyKeys:"",validateStatus:1,enable:1,productId:""}}},watch:{filterText:function(e){},data:function(e){this.$utils.length(e)||this.$refs.refTreeData.toggleSelection()}},created:function(){this.getEnumData(["GetIsOrNotData"]),this.getMenuTreeData()},methods:{clickSearchFilter:function(){var e=this;this.$refs.refBasicSearch.searchFilter(this.$refs.refTreeData,this.modelSearchFilter,(function(){try{e.$refs.refTreeData.filter(e.modelSearchFilter.fuzzy)}catch(e){console.log(e.message)}}))},filterNodeMethod:function(e,t,a){return!e||(!!(a.children&&a.children.length>0)||this.$utilsBasic.searchFilterByFuzzyKeysRow(a,this.modelSearchFilter))},clickDefaultExpandAll:function(){this.defaultExpandAll?this.defaultExpandAll=!1:this.defaultExpandAll=!0,this.modelSearchFilter.fuzzy="",this.getMenuTreeData(1)},clickRefresh:function(){this.modelSearchFilter.fuzzy="",this.basicTree.selectedRows=[],this.basicTree.selectedAll=[],this.getMenuTreeData(1)},getMenuTreeData:function(e){var t=this,a={productId:this.params.productId};Object.assign(this.modelSearchFilter,a),this.defaultCheckAll=!1,d.a.getProductMenuTreeAll(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.pageInfo,{field:this.modelSearchFilter})).then((function(a){if(a.data&&a.data.length>0)if(t.basicTree.treeDataAll=a.data[0],t.basicTree.treeData=a.data[0].children,t.isShowChecked)if(t.data&&t.data.length>0){var r=t.data;t.basicTree.selectedIdArray=r.map((function(e){return e.id})),t.$nextTick((function(){var a=[];a=e?t.$refs.refTreeData.getData():t.$refs.refTreeData.getData().filter((function(e){return 1==e.treeRowLevel})),console.log("resultRows",a),t.$refs.refTreeData.setSelectedRecursionDisenble(a,t.basicTree.selectedIdArray)}))}else t.basicTree.selectedIdArray=[];else t.defaultExpandAll=!0,t.$nextTick((function(){t.$utils.length(t.data)?t.$refs.refTreeData.setCurrentRow(t.data[0],!0):t.$refs.refTreeData.setCurrentRow(t.basicTree.treeData[0],!0)}))}))},selectionChangeMenu:function(e){this.basicTree.selectedRows=e,this.$emit("selectionChange",this.basicTree)},currentChangeMenu:function(e){this.basicTree.selectedRow=e,this.$emit("selectionChange",this.basicTree)},selectableMenu:function(e,t){return this.basicTree.selectedIdArray.includes(e.id)?0:1},clickCheckedAll:function(){this.defaultCheckAll?this.defaultCheckAll=!1:this.defaultCheckAll=!0,this.$refs.refTreeData.checkAll({treeRowSelect:this.defaultCheckAll},!0)}}},h=a(54),p=Object(h.a)(f,r,[],!1,null,null,null);p.options.__file="src/frames/dashboard/views/components/dialog/dialogMenu/index.vue";t.default=p.exports}}]);