(window.webpackJsonpproducts_custormManager=window.webpackJsonpproducts_custormManager||[]).push([["custormManager/null"],{85:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-container"},[a("basic-handler",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",plain:""},on:{click:e.clickRefresh}},[e._v("刷新")]),e._v(" "),a("basic-search",{ref:"refBasicSearch",attrs:{"model-search-filter":e.modelSearchFilter},on:{clickSearchFilter:e.clickSearchFilter}})],1),e._v(" "),a("basic-table",{ref:"refOrgTableData",attrs:{"data-table":e.org.tableData,columns:e.org.tableColumns,pagination:e.modelSearchFilter},on:{"selection-change":e.selectionChangeOrg,"current-change":e.currentChangeOrg,pagination:e.getGoodslist},scopedSlots:e._u([{key:"type",fn:function(t){return[e._v("\n      "+e._s(e.formatType(t.scope.row))+"\n    ")]}}])},[a("template",{slot:"selection"},[e.isShowChecked?a("el-table-column",{attrs:{selectable:e.selectableOrg,type:"selection",align:"center",width:"55"}}):e._e()],1)],2)],1)};r._withStripped=!0;var n,i=a(64),l=a.n(i),o=a(65),s=a.n(o),c=a(55),d=a(56),u=a(58),h=a(59),f=a(34),g={indexTitle:[{text:"编码",value:"code",align:"left",minWidth:140,headerAlign:"center",showOverflowTooltip:!0},{text:"名称",value:"name",align:"left",minWidth:200,headerAlign:"center",showOverflowTooltip:!0},{text:"简称",value:"alias",align:"left",minWidth:140,headerAlign:"center",showOverflowTooltip:!0},{text:"属性",value:"type",align:"left",minWidth:80,headerAlign:"center",showOverflowTooltip:!0},{text:"职责",value:"duty",align:"left",minWidth:120,headerAlign:"center",showOverflowTooltip:!0},{text:"说明",value:"remark",align:"left",minWidth:140,headerAlign:"center",showOverflowTooltip:!0}]},p={name:"DialogOrganization",mixins:[c.a,d.a,u.a,h.a],props:{params:{type:Object,required:!1,default:function(){}},isShowChecked:{type:Boolean,default:!1}},data:function(){return{defaultExpandAll:!1,filterText:"",modelSearchFilter:{page:1,limit:10,enable:1,validateStatus:1,type:1,fuzzyKeys:"",fuzzy:""},tableShow:!1,org:{tableData:{data:[],total:0},tableColumns:g.indexTitle,selectedRows:[],orgSelectedIdArray:[]}}},computed:{validateStatus:function(){return Array.isArray(this.dataEnum.validateStatus)?this.dataEnum.validateStatus.filter((function(e){return"已审核"===e.name}))[0]:{}},enabled:function(){return Array.isArray(this.dataEnum.enabled)?this.dataEnum.enabled.filter((function(e){return"启用"===e.name}))[0]:{}}},watch:{},created:(n=s()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getEnumData(["GetValidateStatusData","GetIsOrNotData"]),this.getGoodslist();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),methods:{clickSearchFilter:function(){var e=this;this.$refs.refBasicSearch.searchFilter(this.$refs.refOrgTableData,this.modelSearchFilter,(function(){e.getGoodslist()}))},getGoodslist:function(){this.getOrg()},clickDefaultExpandAll:function(){this.defaultExpandAll?this.defaultExpandAll=!1:this.defaultExpandAll=!0,this.getOrg()},clickRefresh:function(){this.getOrg()},filterData:function(e,t,a){var r=this;return e.filter((function(e){if(e.children&&e.children.length>0&&(e.children=r.filterData(e.children,t,a)),e[t]==a)return!0}))},getOrg:function(){var e=this;f.a.static.getPage({productAlias:"admin",pageCode:"sysOrgInfo",field:this.modelSearchFilter}).then((function(t){if(e.org.tableData.total=t.data.total,e.org.tableData.data=t.data.rows,e.isShowChecked){if(e.org.tableData.data&&e.org.tableData.data.length>0){var a=e.org.tableData.data;e.org.orgSelectedIdArray=a.map((function(e){return e.id}))}}else e.defaultExpandAll=!0,e.$nextTick((function(){e.$refs.refOrgTableData.setCurrentRow(t.data.rows[0],!0)}))}))},selectionChangeOrg:function(e){this.org.selectedRows=e,this.$emit("selectionChange",this.org)},currentChangeOrg:function(e){this.org.selectedRow=e,this.$emit("selectionChange",this.org)},selectableOrg:function(e,t){return this.dataEnum.isOrNot.some((function(t){if(t.code==e.ifLastLevel&&"是"==t.name)return!0}))?0:1},formatter:function(e){console.log(e)}}},m=a(54),w=Object(m.a)(p,r,[],!1,null,null,null);w.options.__file="src/frames/dashboard/views/components/dialog/dialogOrganization/index.vue";t.default=w.exports}}]);