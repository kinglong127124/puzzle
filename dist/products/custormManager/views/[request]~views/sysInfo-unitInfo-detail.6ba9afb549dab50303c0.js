(window.webpackJsonpproducts_custormManager=window.webpackJsonpproducts_custormManager||[]).push([["custormManager/views/[request]~views/sysInfo-unitInfo-detail"],{50:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("basic-handler",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",plain:""},on:{click:e.clickAdd}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-if-save",plain:""},on:{click:e.clickSave}},[e._v("保存\n        ")]),e._v(" "),a("el-button",{attrs:{disabled:e.disabledDelete,type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.clickDelete}},[e._v("\n            删除\n        ")]),e._v(" "),a("el-button",{attrs:{disabled:e.disabledAuditTwo,type:"primary",size:"small",icon:"el-icon-if-auth",plain:""},on:{click:e.clickAudit}},[e._v("审核\n        ")]),e._v(" "),a("el-button",{attrs:{disabled:e.disabledDisenable,type:"danger",size:"small",icon:"el-icon-circle-close",plain:""},on:{click:e.clickDisenable}},[e._v("禁用\n        ")]),e._v(" "),a("el-button",{attrs:{disabled:e.disabledEnable,type:"success",size:"small",icon:"el-icon-circle-check",plain:""},on:{click:e.clickEnable}},[e._v("启用\n        ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",plain:""},on:{click:function(t){e.getObjDetail()}}},[e._v("\n            刷新\n        ")])],1),e._v(" "),a("el-form",{ref:"refModelForm",staticClass:"form-container",attrs:{model:e.modelForm,rules:e.rules,"show-message":!1,"label-width":"120px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("basic-validate-status",{attrs:{model:e.modelForm}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",attrs:{label:"启用状态",prop:"enable"}},[a("el-radio-group",{model:{value:e.modelForm.enable,callback:function(t){e.$set(e.modelForm,"enable",t)},expression:"modelForm.enable"}},e._l(e.dataEnum.enabled,(function(t){return a("el-radio",{key:t.code,attrs:{label:parseInt(t.code),disabled:""}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])})))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位授权码"}},[a("el-input",{attrs:{disabled:!0,clearable:"",size:"small",placeholder:"自动生成单位授权码"},model:{value:e.modelForm.authCode,callback:function(t){e.$set(e.modelForm,"authCode",t)},expression:"modelForm.authCode"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单位名称",prop:"name","hide-required-asterisk":""}},[a("el-input",{ref:"refName",attrs:{clearable:"",size:"small",placeholder:"请输入单位名称"},model:{value:e.modelForm.name,callback:function(t){e.$set(e.modelForm,"name",t)},expression:"modelForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"登录手机号",prop:"mobile"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入登录手机号"},model:{value:e.modelForm.mobile,callback:function(t){e.$set(e.modelForm,"mobile",t)},expression:"modelForm.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",attrs:{label:"授权模式",prop:"authMode"}},[a("el-radio-group",{model:{value:e.modelForm.authMode,callback:function(t){e.$set(e.modelForm,"authMode",t)},expression:"modelForm.authMode"}},e._l(e.dataEnum.auth,(function(t){return a("el-radio",{key:t.code,attrs:{label:parseInt(t.code)}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])})))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",attrs:{label:"授权方式",prop:"authWay"}},[a("el-radio-group",{model:{value:e.modelForm.authWay,callback:function(t){e.$set(e.modelForm,"authWay",t)},expression:"modelForm.authWay"}},e._l(e.dataEnum.static.authModeType,(function(t){return a("el-radio",{key:t.code,attrs:{label:parseInt(t.code)}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])})))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权开始",prop:"authBeginTime"}},[a("el-date-picker",{attrs:{placeholder:e.modelForm.authBeginTime?e.modelForm.authBeginTime:"请输入授权开始时间",editable:!1,size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.modelForm.authBeginTime,callback:function(t){e.$set(e.modelForm,"authBeginTime",t)},expression:"modelForm.authBeginTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权结束",prop:"authEndTime"}},[a("el-date-picker",{attrs:{placeholder:e.modelForm.authEndTime?e.modelForm.authEndTime:"请输入授权结束时间",editable:!1,size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.modelForm.authEndTime,callback:function(t){e.$set(e.modelForm,"authEndTime",t)},expression:"modelForm.authEndTime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权数",prop:"authUserNumber"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入授权数"},model:{value:e.modelForm.authUserNumber,callback:function(t){e.$set(e.modelForm,"authUserNumber",t)},expression:"modelForm.authUserNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系手机",prop:"contactPersonMobile"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入联系手机,以11位手机号格式标准"},model:{value:e.modelForm.contactPersonMobile,callback:function(t){e.$set(e.modelForm,"contactPersonMobile",t)},expression:"modelForm.contactPersonMobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系邮箱",prop:"contactPersonEmail"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入联系邮箱,以邮箱格式标准"},model:{value:e.modelForm.contactPersonEmail,callback:function(t){e.$set(e.modelForm,"contactPersonEmail",t)},expression:"modelForm.contactPersonEmail"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"信用代码"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入信用代码"},model:{value:e.modelForm.creditCode,callback:function(t){e.$set(e.modelForm,"creditCode",t)},expression:"modelForm.creditCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"法人代表"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入法人代表"},model:{value:e.modelForm.legalPerson,callback:function(t){e.$set(e.modelForm,"legalPerson",t)},expression:"modelForm.legalPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"成立日期"}},[a("el-date-picker",{attrs:{placeholder:e.modelForm.foundTime?e.$utils.date.format(e.modelForm.foundTime):"请输入成立日期",editable:!1,"picker-options":e.pickerOptionsFormat,size:"small",type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.modelForm.foundTime,callback:function(t){e.$set(e.modelForm,"foundTime",t)},expression:"modelForm.foundTime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"官方网站"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入官方网站"},model:{value:e.modelForm.website,callback:function(t){e.$set(e.modelForm,"website",t)},expression:"modelForm.website"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"总机号码"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入总机号码"},model:{value:e.modelForm.telephone,callback:function(t){e.$set(e.modelForm,"telephone",t)},expression:"modelForm.telephone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"行政区划"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入行政区划"},model:{value:e.modelForm.districtCode,callback:function(t){e.$set(e.modelForm,"districtCode",t)},expression:"modelForm.districtCode"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"详细地址"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入详细地址"},model:{value:e.modelForm.address,callback:function(t){e.$set(e.modelForm,"address",t)},expression:"modelForm.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"主联系人"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入主联系人"},model:{value:e.modelForm.contactPerson,callback:function(t){e.$set(e.modelForm,"contactPerson",t)},expression:"modelForm.contactPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系座机"}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入联系座机"},model:{value:e.modelForm.contactPersonTelephone,callback:function(t){e.$set(e.modelForm,"contactPersonTelephone",t)},expression:"modelForm.contactPersonTelephone"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"补充说明"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:4},clearable:"",type:"textarea",placeholder:"请输入补充说明"},model:{value:e.modelForm.authExplain,callback:function(t){e.$set(e.modelForm,"authExplain",t)},expression:"modelForm.authExplain"}})],1)],1)],1)],1)],1)};l._withStripped=!0;var o=a(64),r=a.n(o),n=a(65),s=a.n(n),i=a(5),c=a.n(i),m=a(55),d=a(56),u=a(33),p=a(79),f=a(7),b=a(60),h=a(34);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={name:"UnitInfoDetail",mixins:[m.a,d.a],data:function(){return{modelForm:{},rules:{name:[{required:!0,trigger:"change"}],mobile:[{required:!0,validator:function(e,t,a){Object(b.d)(e,t,a,!0,["登录手机号"])},trigger:"change"}],authBeginTime:[{required:!0,trigger:"change"}],authEndTime:[{required:!0,trigger:"change"}],authUserNumber:[{required:!0,validator:function(e,t,a){Object(b.c)(e,t,a,!0,["授权数",1,20])},trigger:"change"},{required:!0,validator:function(e,t,a){Object(b.e)(e,t,a,!0,["授权数"],b.a)},trigger:"change"}],contactPersonMobile:[{validator:function(e,t,a){Object(b.d)(e,t,a,!1,["联系手机"])},trigger:"change"}],contactPersonEmail:[{validator:function(e,t,a){Object(b.b)(e,t,a,!1,["联系邮箱"])},trigger:"change"}]},pickerOptionsFormat:{disabledDate:function(e){return e.getTime()>Date.now()}}}},computed:{disabledAudit:function(){return 1==this.modelForm.validateStatus},disabledDelete:function(){return!this.modelForm.id||1==this.modelForm.validateStatus},disabledAuditTwo:function(){return 1==this.modelForm.validateStatus},disabledDisenable:function(){return!this.modelForm||1!=this.modelForm.validateStatus||1!=this.modelForm.enable},disabledEnable:function(){return!this.modelForm||1!=this.modelForm.validateStatus||2!=this.modelForm.enable}},deactivated:function(){this.$store.dispatch("cacheId",void 0)},activated:function(){var e=this;this.$utilsBasic.loadAddAndDetailData(this,(function(t){e.clickAdd()}),(function(t){e.modelForm.id=t,e.getObjDetail()}))},created:function(){this.getEnumData(["GetValidateStatusData","GetEnabledData","GetAuthData"]),this.$store.dispatch("cacheId","0")},methods:{getObjDetail:function(){var e=this;this.modelForm.id&&h.a.static.getObjDetail(F({},this.basePage,{field:this.modelForm})).then((function(t){200==t.status&&(e.modelForm=t.data)})).catch((function(e){console.log(e)}))},clickAdd:function(){var e=this;return this.$nextTick((function(){e.modelForm={validateStatus:2,enable:parseInt(p.a.enable[0].code),authMode:parseInt(p.a.authMode[0].code),authWay:parseInt(p.a.authModeType[0].code)}})),this.$utilsBasic.valideFocus(this,["refName"])},putAddAndUpdateAll:function(e){var t=this;this.modelForm.id?h.a.static.putObj(F({},this.basePage,{field:this.modelForm})).then(function(){var a=s()(r.a.mark((function a(l){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:200==l.status&&(t.modelForm=l.data,e&&"function"==typeof e?e(t.modelForm.id):t.$message({message:l.message,type:"success"}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)})):h.a.static.postObj(F({},this.basePage,{field:this.modelForm})).then(function(){var a=s()(r.a.mark((function a(l){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:200==l.status&&(t.modelForm=l.data,e&&"function"==typeof e?e(t.modelForm.id):t.$message({message:l.message,type:"success"}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},clickSave:function(){var e=this;return this.validateAfter((function(){e.putAddAndUpdateAll()}),!0,!1,!1)},validateAfter:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!0;if(t&&this.$refs.refModelForm.validate((function(e){return!e&&(o=e),!o})),o){if(!this.$utilsBasic.date.compareDatetime(this.modelForm.authBeginTime,this.modelForm.authEndTime))return this.$message({message:"授权开始时间不能大于授权结束时间",type:"warning"});"function"==typeof e&&e()}else{if(t)return this.$message({message:u.a.info.updateEmptyError,type:"warning"}),this.$utilsBasic.valideFocus(this,["refName"]);if(l&&a)return!1}},clickAudit:function(){var e=this;return this.validateAfter((function(){e.$confirm("亲，您是否确定审核当前数据，审核后数据不能修改！",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.putAddAndUpdateAll((function(t){h.a.static.putObjAudit(F({},e.basePage,{field:e.modelForm})).then((function(t){200==t.status&&(e.$message.success(t.message),e.modelForm.validateStatus=t.data.validateStatus,e.modelForm.authCode=t.data.authCode)})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)}))}),!0,!0,!1)},clickDelete:function(){var e=this;this.$confirm(u.a.info.delete,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){h.a.static.deleteObj(F({},e.basePage,{field:e.modelForm})).then((function(t){200==t.status&&(e.$message.success(t.message),e.$refs.refBasicUpload.clearAttacheFile(),e.clickAdd())})).catch((function(e){console.log(e)}))})).catch((function(){}))},clickDisenable:function(){this.putEnable(u.a.info.disEnable,2)},clickEnable:function(){this.putEnable(u.a.info.enable,1)},putEnable:function(e,t){var a=this;this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=Object(f.b)(a.modelForm);e.enable=t,h.a.static.putObjEnable(F({},a.basePage,{field:e})).then((function(e){200===e.status&&(a.modelForm.enable=t,a.$message({message:e.message,type:"success"}))})).catch((function(e){console.log(e)}))}),(function(e){console.log(e)}))},changeFoundTime:function(e){e&&(this.modelForm.foundTime=new Date(e).getTime())}}},y=a(54),k=Object(y.a)(g,l,[],!1,null,null,null);k.options.__file="src/products/custormManager/views/sysInfo/unitInfo/detail.vue";t.default=k.exports}}]);