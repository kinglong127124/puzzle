(window.webpackJsonpproducts_custormManager=window.webpackJsonpproducts_custormManager||[]).push([["custormManager/views/[request]~views/sysInfo-businessManager-businessContract-detail","custormManager/views/sysInfo-unitInfo-detail"],{47:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail-container"},[a("div",{staticClass:"handler-container"},[t.addBtnShowFlag&&t.isUpdateAuthWorkFlow?a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"small"},on:{click:t.handleAddBtn}},[t._v("新增\n    ")]):t._e(),t._v(" "),t.saveBtnShowFlag?a("el-button",{attrs:{disabled:t.saveBtnDisabledFlag||t.auditBtnDisabledFlag,type:"primary",icon:"el-icon-if-save",size:"small",plain:""},on:{click:t.handleSaveBtn}},[t._v("保存\n    ")]):t._e(),t._v(" "),t.deleteBtnShowFlag&&t.isUpdateAuthWorkFlow?a("el-button",{attrs:{disabled:t.deleteBtnDisabledFlag,type:"danger",icon:"el-icon-delete",size:"small",plain:""},on:{click:t.handleDeleteBtn}},[t._v("删除\n    ")]):t._e(),t._v(" "),t.auditBtnShowFlag&&t.isUpdateAuthWorkFlow?a("el-button",{attrs:{disabled:t.auditBtnDisabledFlag||2!==t.detailForm.validateStatus,type:"primary",icon:"el-icon-if-auth",size:"small",plain:""},on:{click:t.handleAuditBtn}},[t._v("审核\n    ")]):t._e(),t._v(" "),a("basic-see-process",{attrs:{id:t.detailForm.processInstanceId}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",plain:""},on:{click:t.getDetailForm}},[t._v("刷新")])],1),t._v(" "),a("el-form",{ref:"refDetailForm",staticClass:"form-container",attrs:{model:t.detailForm,rules:t.rules,"show-message":!1,"label-width":"120px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("basic-validate-status",{attrs:{model:t.detailForm}})],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编码"}},[a("el-input",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:"系统自动生成合同编码"},model:{value:t.detailForm.code,callback:function(e){t.$set(t.detailForm,"code",e)},expression:"detailForm.code"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"原始合同号",prop:"orignalCode","hide-required-asterisk":""}},[a("el-input",{ref:"refOrignalCode",attrs:{disabled:t.disabledFlag,size:"small",clearable:"",placeholder:"请输入原始合同号",maxlength:"100"},model:{value:t.detailForm.orignalCode,callback:function(e){t.$set(t.detailForm,"orignalCode",e)},expression:"detailForm.orignalCode"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同名称",prop:"name","hide-required-asterisk":""}},[a("el-input",{ref:"refName",attrs:{disabled:t.disabledFlag,size:"small",clearable:"",placeholder:"请输入合同名称",maxlength:"100"},model:{value:t.detailForm.name,callback:function(e){t.$set(t.detailForm,"name",e)},expression:"detailForm.name"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品开发单位"}},[a("el-input",{ref:"refPerson",attrs:{disabled:!0,size:"small",clearable:"",placeholder:"请输入产品开发单位",maxlength:"100"},model:{value:t.detailForm.devOrgName,callback:function(e){t.$set(t.detailForm,"devOrgName",e)},expression:"detailForm.devOrgName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品服务单位",prop:"serviceOrgName","hide-required-asterisk":""}},[a("el-input",{attrs:{disabled:t.disabledFlag,size:"small",readonly:"",placeholder:"请选择产品服务单位"},model:{value:t.detailForm.serviceOrgName,callback:function(e){t.$set(t.detailForm,"serviceOrgName",e)},expression:"detailForm.serviceOrgName"}},[a("el-button",{staticClass:"form-btn",attrs:{slot:"append",disabled:t.disabledFlag,size:"small",icon:"el-icon-plus"},on:{click:function(e){t.toipClick("org")}},slot:"append"})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品使用单位",prop:"useOrgName","hide-required-asterisk":""}},[a("el-input",{attrs:{disabled:t.disabledFlag,size:"small",readonly:"",placeholder:"请选择产品使用单位"},model:{value:t.detailForm.useOrgName,callback:function(e){t.$set(t.detailForm,"useOrgName",e)},expression:"detailForm.useOrgName"}},[a("el-button",{staticClass:"form-btn",attrs:{slot:"append",disabled:t.disabledFlag,size:"small",icon:"el-icon-plus"},on:{click:function(e){t.toipClick("unit")}},slot:"append"})],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",class:{disabled:t.disabledFlag},attrs:{label:"授权模式",prop:"authModel"}},[a("el-radio-group",{model:{value:t.detailForm.authModel,callback:function(e){t.$set(t.detailForm,"authModel",e)},expression:"detailForm.authModel"}},t._l(t.dataEnum.auth,(function(e){return a("el-radio",{key:e.code,attrs:{disabled:t.disabledFlag,label:parseInt(e.code)}},[t._v("\n              "+t._s(e.name)+"\n            ")])})))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",class:{disabled:t.disabledFlag},attrs:{label:"授权方式",prop:"authWay"}},[a("el-radio-group",{model:{value:t.detailForm.authWay,callback:function(e){t.$set(t.detailForm,"authWay",e)},expression:"detailForm.authWay"}},t._l(t.dataEnum.static.authModeType,(function(e){return a("el-radio",{key:e.code,attrs:{disabled:t.disabledFlag,label:parseInt(e.code)}},[t._v("\n              "+t._s(e.name)+"\n            ")])})))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权数",prop:"authNum"}},[a("el-input",{attrs:{disabled:t.disabledFlag,clearable:"",size:"small",min:"0",maxlength:"100",placeholder:"请输入授权数"},model:{value:t.detailForm.authNum,callback:function(e){t.$set(t.detailForm,"authNum",e)},expression:"detailForm.authNum"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权开始",prop:"authBeginTime"}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,disabled:t.disabledFlag,size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp",placeholder:"选择时间"},on:{change:t.changeBeginTime},model:{value:t.detailForm.authBeginTime,callback:function(e){t.$set(t.detailForm,"authBeginTime",e)},expression:"detailForm.authBeginTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权截至",prop:"authEndTime"}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,disabled:t.disabledFlag,size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp",placeholder:"选择时间"},on:{change:t.changeEndTime},model:{value:t.detailForm.authEndTime,callback:function(e){t.$set(t.detailForm,"authEndTime",e)},expression:"detailForm.authEndTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约金额"}},[a("basic-input",{attrs:{"format-value":t.formatToMoney,format:t.formatToThousands,disabled:t.disabledFlag,min:0,clearable:"",price:"",placeholder:"请输入签约金额"},model:{value:t.detailForm.signPrice,callback:function(e){t.$set(t.detailForm,"signPrice",e)},expression:"detailForm.signPrice"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约日期"}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,disabled:t.disabledFlag,size:"small",type:"date","value-format":"timestamp",placeholder:"选择日期"},model:{value:t.detailForm.signDate,callback:function(e){t.$set(t.detailForm,"signDate",e)},expression:"detailForm.signDate"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{staticClass:"mode-select",attrs:{disabled:t.disabledFlag,size:"small",placeholder:"请选择发票类型"},on:{change:function(e){t.detailForm.invoiceTypeId=t.dataDictionary.invoiceType.data.filter((function(e){return e.name==t.detailForm.invoiceType}))[0].id}},model:{value:t.detailForm.invoiceType,callback:function(e){t.$set(t.detailForm,"invoiceType",e)},expression:"detailForm.invoiceType"}},t._l(t.dataDictionary.invoiceType.data,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票税率"}},[a("basic-input",{attrs:{"format-value":t.formatToMoney,format:t.formatToThousands,disabled:t.disabledFlag||"无"===t.detailForm.invoiceType,min:0,max:1,clearable:"",placeholder:"请输入发票税率",price:""},on:{change:t.changeInvoiceTaxRate},model:{value:t.detailForm.invoiceTaxRate,callback:function(e){t.$set(t.detailForm,"invoiceTaxRate",e)},expression:"detailForm.invoiceTaxRate"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商务人员"}},[a("el-input",{attrs:{disabled:t.disabledFlag,clearable:"",size:"small",min:"0",maxlength:"100",placeholder:"请输入商务人员"},model:{value:t.detailForm.busPerson,callback:function(e){t.$set(t.detailForm,"busPerson",e)},expression:"detailForm.busPerson"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同摘要"}},[a("el-input",{attrs:{disabled:t.disabledFlag,autosize:{minRows:6,maxRows:8},maxlength:"5000",size:"small",clearable:"",type:"textarea",placeholder:"请输入合同摘要，不超过5000字"},model:{value:t.detailForm.summary,callback:function(e){t.$set(t.detailForm,"summary",e)},expression:"detailForm.summary"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"补充说明"}},[a("el-input",{attrs:{disabled:t.disabledFlag,autosize:{minRows:6,maxRows:8},maxlength:"5000",size:"small",clearable:"",type:"textarea",placeholder:"请输入补充说明，不超过5000字"},model:{value:t.detailForm.remark,callback:function(e){t.$set(t.detailForm,"remark",e)},expression:"detailForm.remark"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"add-border file",attrs:{label:"附件"}},[a("basic-upload",{ref:"refBasicUpload",attrs:{disabled:t.disabledFlag,"form-id":t.detailFormId}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"登记人员"}},[a("el-input",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:"系统自动生成登记人员"},model:{value:t.detailForm.inputPerson,callback:function(e){t.$set(t.detailForm,"inputPerson",e)},expression:"detailForm.inputPerson"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"登记时间"}},[a("el-input",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:"系统自动生成登记时间"},model:{value:t.detailForm.inputTime,callback:function(e){t.$set(t.detailForm,"inputTime",e)},expression:"detailForm.inputTime"}})],1)],1)],1)],1),t._v(" "),a("basic-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.visibleSyncOrg,title:"产品服务单位-选择"},on:{"update:visible":function(e){t.visibleSyncOrg=e}}},[t.visibleSyncOrg?a("dialog-organization",{on:{selectionChange:t.selectionChange}}):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visibleSyncOrg=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleChange}},[t._v("确 定")])],1)],1),t._v(" "),a("basic-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.visibleSyncUnit,title:"产品使用单位-选择"},on:{"update:visible":function(e){t.visibleSyncUnit=e}}},[t.visibleSyncUnit?a("dialog-unit",{on:{selectionChange:t.selectionChange}}):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visibleSyncUnit=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleChange}},[t._v("确 定")])],1)],1)],1)};i._withStripped=!0;var r=a(64),n=a.n(r),s=a(65),o=a.n(s),l=a(5),u=a.n(l),d=a(55),c=a(56),m=a(58),f=a(59),h=a(33),p=a(60),g=a(34);function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function b(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){u()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={name:"BusinessContractDetail",components:{dialogOrganization:function(){return a.e("custormManager/null").then(a.bind(null,85))},dialogUnit:function(){return a.e("custormManager/null").then(a.bind(null,84))}},mixins:[d.a,c.a,m.a,f.a],props:{isUpdateAuthWorkFlow:{type:Boolean,default:function(){return!0}},reserve:null},data:function(){return{addBtnShowFlag:!0,saveBtnShowFlag:!0,deleteBtnShowFlag:!0,auditBtnShowFlag:!0,apiParams:{productAlias:"smartpm",pageCode:"sysBusContractMaster"},detailFormId:void 0,detailForm:{},saveBtnDisabledFlag:!0,rules:{orignalCode:[{required:!0,validator:function(t,e,a){Object(p.c)(t,e,a,!0,["原始合同号",1,100])},trigger:"change"}],name:[{required:!0,validator:function(t,e,a){Object(p.c)(t,e,a,!0,["合同名称",1,100])},trigger:"change"}],authNum:[{required:!0,validator:function(t,e,a){Object(p.c)(t,e,a,!0,["授权数",1,20])},trigger:"change"},{required:!0,validator:function(t,e,a){Object(p.e)(t,e,a,!0,["授权数"],p.a)},trigger:"change"}],serviceOrgName:[{required:!0,message:"请选择产品服务单位",trigger:"change"}],useOrgName:[{required:!0,message:"请选择产品使用单位",trigger:"change"}],authBeginTime:[{required:!0,message:"请选择授权开始时间",trigger:"change"}],authEndTime:[{required:!0,message:"请选择授权结束时间",trigger:"change"}]},type:null,visibleSyncOrg:!1,visibleSyncUnit:!1,selectedRow:{}}},computed:{deleteBtnDisabledFlag:function(){return!(2===this.detailForm.validateStatus&&this.detailForm.id)},auditBtnDisabledFlag:function(){if(this.validateStatus)return(5!=this.detailForm.validateStatus||1!=this.reserve)&&this.validateStatus.map((function(t){return Number(t.code)})).includes(this.detailForm.validateStatus)},disabledFlag:function(){return this.auditBtnDisabledFlag},validateStatus:function(){return Array.isArray(this.dataEnum.auditStatusEnum)?this.dataEnum.auditStatusEnum.filter((function(t){return 1==t.code||3==t.code||4==t.code||5==t.code})):{}}},watch:{detailForm:{handler:function(){this.saveBtnDisabledFlag=!1},deep:!0}},deactivated:function(){this.$store.dispatch("cacheId",void 0)},activated:function(){var t=this;this.$utilsBasic.loadAddAndDetailData(this,(function(){t.$route.params&&(t.detailFormId=t.$route.params.id?t.$route.params.id:void 0),t.handleAddBtn()}),(function(e){t.detailFormId=e,t.getDetailForm()}))},created:function(){this.getEnumData(["GetAuditStatusEnum","GetAuthData","GetInvoiceTypeList"]),this.$store.dispatch("cacheId","0")},methods:{handleAddBtn:function(){this.addDetailForm(),this.$nextTick((function(){}))},handleSaveBtn:function(){var t=this;this.validateAfter((function(){t.saveDetailForm().catch((function(t){console.log(t)}))}))},handleDeleteBtn:function(){var t=this;this.$confirm(h.a.info.delete,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$utils.isEmpty(t.detailFormId)?t.addDetailForm():t.deleteDetailForm().then((function(){t.addDetailForm()})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))},handleAuditBtn:function(){var t=this;this.$confirm(h.a.info.audit,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.validateAfter((function(){t.saveDetailForm(!0).then((function(){t.auditDetailForm()}))}))})).catch((function(t){console.log(t)}))},validateAfter:function(t){var e=!0;if(this.$refs.refDetailForm.validate((function(t){return!t&&(e=t),!e})),!e)return this.$message({message:h.a.info.updateEmptyError,type:"warning"}),this.$utilsBasic.valideFocus(this,["refOrignalCode","refName","refPerson"]);"function"==typeof t&&t()},toipClick:function(t){this.disabled||(this.type=t,this["visibleSync"+t.replace(/(^[\w\W])/,(function(t){return t.toLocaleUpperCase()}))]=!0)},selectionChange:function(t){this.selectedRow=t.selectedRow},handleChange:function(){var t=this.selectedRow;if(!this.isSelectedRow(t))return!1;if(0!==Object.keys(t).length){switch(this.type){case"org":this.detailForm=Object.assign({},this.detailForm,{serviceOrgName:t.name,serviceOrgId:t.id});break;case"unit":this.detailForm=Object.assign({},this.detailForm,{useOrgName:t.name,useOrgId:t.id})}this.saveBtnDisabledFlag=!1,this["visibleSync"+this.type.replace(/(^[\w\W])/,(function(t){return t.toLocaleUpperCase()}))]=!1}},addDetailForm:function(){var t=this;this.$nextTick((function(){t.detailFormId=void 0,t.detailForm={id:"",validateStatus:2,handEndDate:(new Date).getTime(),devOrgName:t.$store.state.user.login.orgName,devOrgId:t.$store.state.user.login.orgId,authModel:2,authWay:1,authNum:10,authBeginTime:(new Date).getTime(),authEndTime:(new Date).getTime(),signDate:(new Date).getTime(),invoiceTaxRate:"0.00",inputPerson:t.userLogin.inputPersonFullPath,inputTime:t.$utils.date.format(new Date,"YYYY-MM-DD hh:mm:ss")}})),this.$refs.refDetailForm.resetFields(),this.$refs.refOrignalCode.focus(),console.log("this.detailForm",this.detailForm)},getDetailForm:function(){var t=this;if(this.detailFormId)return g.a.static.getObjDetail(b({},this.apiParams,{field:{id:this.detailFormId}})).then((function(e){e.rel?(console.log("表单内容",e),t.detailForm=e.data,t.$set(t.detailForm,"authBeginTime",new Date(e.data.authBeginTime).getTime()),t.$set(t.detailForm,"authEndTime",new Date(e.data.authEndTime).getTime()),t.$set(t.detailForm,"signDate",new Date(e.data.signDate).getTime()),t.$nextTick((function(){}))):t.$message({message:e.message,type:"warning"})})).catch((function(t){console.log(t)}));this.addDetailForm()},saveDetailForm:function(t){var e=this,a=this.$utils.copy(this.detailForm);return this.$utils.isEmpty(this.detailFormId)?g.a.static.postObj(b({},this.apiParams,{field:a})).then(function(){var a=o()(n.a.mark((function a(i){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.status||200!==i.status){a.next=15;break}return console.log("保存成功",i),e.detailForm.id=i.data.id,e.detailFormId=i.data.id,e.detailForm=i.data,e.$set(e.detailForm,"authBeginTime",new Date(i.data.authBeginTime).getTime()),e.$set(e.detailForm,"authEndTime",new Date(i.data.authEndTime).getTime()),e.$set(e.detailForm,"signDate",new Date(i.data.signDate).getTime()),a.next=10,e.$refs.refBasicUpload.submitUpload(i.data);case 10:if(a.sent){a.next=12;break}return a.abrupt("return",!1);case 12:t||e.$message.success(i.message),a.next=16;break;case 15:e.$message({message:i.message,type:"warning"});case 16:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){console.log(t)})):g.a.static.putObj(b({},this.apiParams,{field:a})).then(function(){var a=o()(n.a.mark((function a(i){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.status||200!==i.status){a.next=13;break}return e.detailForm=i.data,e.$set(e.detailForm,"authBeginTime",new Date(i.data.authBeginTime).getTime()),e.$set(e.detailForm,"authEndTime",new Date(i.data.authEndTime).getTime()),e.$set(e.detailForm,"signDate",new Date(i.data.signDate).getTime()),console.log("修改成功",i),a.next=8,e.$refs.refBasicUpload.submitUpload(i.data);case 8:if(a.sent){a.next=10;break}return a.abrupt("return",!1);case 10:t||e.$message.success(i.message),a.next=14;break;case 13:e.$message({message:i.message,type:"warning"});case 14:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){console.log(t)}))},deleteDetailForm:function(){var t=this;return g.a.static.deleteObj(b({},this.apiParams,{field:{id:this.detailFormId}})).then((function(e){e.status&&200===e.status?(t.$message.success(e.message),t.$refs.refBasicUpload.clearAttacheFile()):t.$message({message:e.message,type:"warning"})})).catch((function(t){console.log(t)}))},auditDetailForm:function(){var t=this;return console.log("this.detailForm",this.detailForm),g.a.static.putObjAudit(b({},this.apiParams,{field:this.detailForm})).then((function(e){if(console.log("audit res",e),e.status&&200===e.status){if(t.detailForm=e.data,t.$set(t.detailForm,"authBeginTime",new Date(e.data.authBeginTime).getTime()),t.$set(t.detailForm,"authEndTime",new Date(e.data.authEndTime).getTime()),t.$set(t.detailForm,"signDate",new Date(e.data.signDate).getTime()),e.data.processInstanceId)return t.$store.dispatch("OpenSelectUserAndHandleAudit",{processId:e.data.processInstanceId,formData:e.data}).then((function(){t.$message.success(e.message)}));t.$message.success(e.message)}else t.$message({message:e.message,type:"warning"})})).catch((function(t){console.log(t)}))},changeInvoiceTaxRate:function(){(this.detailForm.invoiceTaxRate<0||this.detailForm.invoiceTaxRate>1)&&(this.detailForm.invoiceTaxRate="0",this.$message({message:h.a.info.invoiceTaxRate,type:"warning"}))},changeBeginTime:function(t){console.log("changeBeginTime",t,this.detailForm.authEndTime),t>this.detailForm.authEndTime&&(this.$message({message:"开始时间不能大于结束时间",type:"warning"}),this.$set(this.detailForm,"authBeginTime",null))},changeEndTime:function(t){t<this.detailForm.authBeginTime&&(this.$message({message:"结束时间不能小于开始时间",type:"warning"}),this.$set(this.detailForm,"authEndTime",null))}}},F=a(54),T=Object(F.a)(y,i,[],!1,null,null,null);T.options.__file="src/products/custormManager/views/sysInfo/businessManager/businessContract/detail.vue";e.default=T.exports},58:function(t,e,a){"use strict";var i=a(2),r=a.n(i);function n(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(t,e)}(t))){var e=0,a=function(){};return{s:a,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,n=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return n=t.done,t},e:function(t){o=!0,r=t},f:function(){try{n||null==i.return||i.return()}finally{if(o)throw r}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}e.a={methods:{formatIfMainDuty:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.ifMainDuty){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIfOperate:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.ifOperate){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIsAdmin:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.isAdmin){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIsTender:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.date){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIfInviteBid:function(t){console.log(t.ifInviteBid);var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.ifInviteBid){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIfContract:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.ifContract){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIfPay:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.ifPay){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatSex:function(t){var e,a="未知",i=n(this.dataEnum.gender);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.sex||r.code==t.gender||r.code==t.personGender){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatEnable:function(t){var e,a="未知",i=n(this.dataEnum.enabled);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.enable){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatValidateStatus:function(t){var e,a="未知",i=n(this.dataEnum.validateStatus);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.validateStatus){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatRoleType:function(t){var e,a="未知",i=n(this.dataEnum.roleType);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.roleType){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatJobStatus:function(t){var e,a="未知",i=n(this.dataEnum.jobStatus);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.status){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatHolidayType:function(t){var e,a="未知",i=n(this.dataEnum.holidayType);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.type){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatType:function(t){var e,a="未知",i=n(this.dataEnum.type);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.type){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatReadStatus:function(t){var e,a="未知",i=n(this.dataEnum.readStatus);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.readStatus){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIfLastLevel:function(t){var e,a="未知",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.ifLastLevel){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatIsOrNot:function(t){var e,a="否",i=n(this.dataEnum.isOrNot);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatEnabledEnumSchedule:function(t){var e,a="未知",i=n(this.dataEnum.enableEnumSchedule);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatSubFinBillType:function(t){var e,a="未知",i=n(this.dataEnum.subFinBillType);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.billType){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatPurchaseBillType:function(t){var e,a="未知",i=n(this.dataEnum.purchaseBillType);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.billType){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatBillType:function(t){var e,a="未知",i=n(this.dataEnum.billType);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.billType){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatOutType:function(t){var e,a="未知",i=n(this.dataEnum.outType);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.outType){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatInType:function(t){return this.$utilsBasic.formatName(this.dataEnum.inType,t.inType)},formatAmType:function(t){return this.$utilsBasic.formatName(this.dataEnum.amType,t)},formatUseEnterpriseType1:function(t){return this.$utilsBasic.formatName(this.dataEnum.useEnterpriseType,t)},formatAuditStatusEnum:function(t){return t="object"==r()(t)?t.validateStatus:t,this.$utilsBasic.formatName(this.dataEnum.auditStatusEnum,t)},formatStockTypeEnum:function(t){return this.$utilsBasic.formatName(this.dataEnum.stockType,t.inType)},formatUseEnterpriseType:function(t){return this.$utilsBasic.formatName(this.dataEnum.static.useEnterpriseType,t.useEnterpriseType)},formatProIncomeType:function(t){return this.$utilsBasic.formatName(this.dataEnum.proIncomeTypeEnum,t.billType)},formatProCostType:function(t){return this.$utilsBasic.formatName(this.dataEnum.proCostTypeEnum,t.costType)},formatProCostBillType:function(t){return this.$utilsBasic.formatName(this.dataEnum.proCostBillTypeEnum,t.billType)},formatLogType:function(t){return this.$utilsBasic.formatName(this.dataEnum.static.logType,t.logType)},formatSiginStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.siginStatus,t.signStatus)},formatSiteType:function(t){return this.$utilsBasic.formatName(this.dataEnum.siteType,t.siteType)},formatMachineStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.machineStatus,t.machineStatus)},formatBorrowStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.certBorrowStatus,t.borrowStatus)},formatStatus:function(t){var e,a="未知",i=n(this.dataEnum.status);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.status){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatMediumEnum:function(t){var e,a="未知",i=n(this.dataEnum.medium);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.medium){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatStatusEnum:function(t){var e,a="未知",i=n(this.dataEnum.statusEnum);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.code==t.status){a=r.name;break}}}catch(t){i.e(t)}finally{i.f()}return a},formatVehicleStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.vehicleStatus,t.vehicleStatus)},formatVideoType:function(t){return this.$utilsBasic.formatName(this.dataEnum.static.videoType,t.type)},formatBindStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.static.bindStatus,t.bindStatus)},formatTaskEdEnum:function(t){return this.$utilsBasic.formatName(this.dataEnum.taskEdEnum,t.emergencyDegree)},formatCompletedState:function(t){return this.$utilsBasic.formatName(this.dataEnum.completedState,t.status)},formatChangeType:function(t){return this.$utilsBasic.formatName(this.dataEnum.ifchange,t.changeType)},formatOperationWay:function(t){return this.$utilsBasic.formatName(this.dataEnum.operate,t.operationWay)},formatTransactionStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.transactionStatus,t.status)},formatTypeStatus:function(t){return this.$utilsBasic.formatName(this.dataEnum.static.contractType,t.type)},formatJobStatusUser:function(t){return this.$utilsBasic.formatName(this.dataEnum.static.jobStatusUser,t.jobStatus)},formatBillTypeEnum:function(t){return t="object"==r()(t)?t.validateStatus:t,this.$utilsBasic.formatName(this.dataEnum.billTypeEnum,t)},formatAuthMode:function(t){return t="object"==r()(t)?t.authMode:t,this.$utilsBasic.formatName(this.dataEnum.static.authMode,t)},formatAuthModeType:function(t){return t="object"==r()(t)?t.authWay:t,this.$utilsBasic.formatName(this.dataEnum.static.authModeType,t)}}}},59:function(t,e,a){"use strict";var i=a(2),r=a.n(i);e.a={methods:{formatDate:function(t,e,a){return"string"==typeof t||"number"==typeof t?t?this.$utils.date.format(t):t:"object"===r()(t)?t&&a?this.$utils.date.format(a):a:void 0},formatDateTime:function(t,e,a){return"string"==typeof t||"number"==typeof t?t?this.$utils.date.format(t,"YYYY-MM-DD hh:mm:ss"):t:"object"===r()(t)?t&&a?this.$utils.date.format(a,"YYYY-MM-DD hh:mm:ss"):a:void 0},formatMonth:function(t,e,a){return"string"==typeof t?this.$utils.date.format(t,"YYYY-MM"):"object"===r()(t)?this.$utils.date.format(a,"YYYY-MM"):void 0},formatToThousandsNum:function(t,e,a){return"string"==typeof t||"number"==typeof t?this.$utilsBasic.toThousands(t,0):"object"===r()(t)?this.$utilsBasic.toThousands(a,0):void 0},formatToThousands:function(t,e,a){return"string"==typeof t||"number"==typeof t?this.$utilsBasic.toThousands(t):"object"===r()(t)?this.$utilsBasic.toThousands(a):void 0},formatToThousandsFour:function(t,e,a){return"string"==typeof t||"number"==typeof t?this.$utilsBasic.toThousands(t,4):"object"===r()(t)?this.$utilsBasic.toThousands(a,4):void 0},formatToMoney:function(t,e,a){return"string"==typeof t||"number"==typeof t?this.$utilsBasic.toMoney(t):"object"===r()(t)?this.$utilsBasic.toMoney(a):void 0},formatToMoneyFour:function(t,e,a){return"string"==typeof t||"number"==typeof t?this.$utilsBasic.toMoney(t,4):"object"===r()(t)?this.$utilsBasic.toMoney(a,4):void 0},formatMoeryCard:function(t,e,a){return"string"==typeof t||"number"==typeof t?this.$utilsBasic.moeryCard(t,4):"object"===r()(t)?this.$utilsBasic.moeryCard(a,4):void 0},formatPersonPath:function(t,e,a){return"string"==typeof t?t?this.$utilsBasic.formatPersonPath(t):t:"object"===r()(t)?t&&a?this.$utilsBasic.formatPersonPath(a):a:void 0},formatBrowserTerminal:function(t,e,a){if("string"==typeof t){if(t){var i=this.$utilsBasic.formatBrowserTerminal(t);return"PC"==i.terminal?i.terminal+" | "+i.browser:i.terminal}return t}if("object"===r()(t)){if(t&&a){var n=this.$utilsBasic.formatBrowserTerminal(a);return"PC"==n.terminal?n.terminal+" | "+n.browser:n.terminal}return a}}}}},60:function(t,e,a){"use strict";function i(t){return/^\d+$/.test(t)}function r(t){return/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57]|171|19[0-9])[0-9]{8}$/.test(t)}function n(t,e,a,i,r){i&&(e||a(new Error(r[0]+"不能为空！"))),e&&(e.length<r[1]||e.length>r[2])?a(new Error(r[0]+"长度在 "+r[1]+" 到 "+r[2]+" 个字符！")):a()}function s(t,e,a,i,r,n){i&&(e||a(new Error(r[0]+"不能为空！"))),e?n(e)?a():a(new Error("格式错误！")):a()}function o(t,e,a,i,r){i&&(e||a(new Error(r[0]+"不能为空！"))),e?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?a():a(new Error("格式错误！")):a()}function l(t,e,a,i,n){i&&(e||a(new Error(n[0]+"不能为空！"))),e?r(e)?a():a(new Error(n[0]+"格式错误！")):a()}a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return l}))}}]);