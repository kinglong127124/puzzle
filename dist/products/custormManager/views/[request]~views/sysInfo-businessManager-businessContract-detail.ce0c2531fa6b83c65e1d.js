(window.webpackJsonpproducts_custormManager=window.webpackJsonpproducts_custormManager||[]).push([["custormManager/views/[request]~views/sysInfo-businessManager-businessContract-detail"],{49:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail-container"},[a("div",{staticClass:"handler-container"},[e.addBtnShowFlag&&e.isUpdateAuthWorkFlow?a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"small"},on:{click:e.handleAddBtn}},[e._v("新增\n    ")]):e._e(),e._v(" "),e.saveBtnShowFlag?a("el-button",{attrs:{disabled:e.saveBtnDisabledFlag||e.auditBtnDisabledFlag,type:"primary",icon:"el-icon-if-save",size:"small",plain:""},on:{click:e.handleSaveBtn}},[e._v("保存\n    ")]):e._e(),e._v(" "),e.deleteBtnShowFlag&&e.isUpdateAuthWorkFlow?a("el-button",{attrs:{disabled:e.deleteBtnDisabledFlag,type:"danger",icon:"el-icon-delete",size:"small",plain:""},on:{click:e.handleDeleteBtn}},[e._v("删除\n    ")]):e._e(),e._v(" "),e.auditBtnShowFlag&&e.isUpdateAuthWorkFlow?a("el-button",{attrs:{disabled:e.auditBtnDisabledFlag||2!==e.detailForm.validateStatus,type:"primary",icon:"el-icon-if-auth",size:"small",plain:""},on:{click:e.handleAuditBtn}},[e._v("审核\n    ")]):e._e(),e._v(" "),a("basic-see-process",{attrs:{id:e.detailForm.processInstanceId}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-refresh",plain:""},on:{click:e.getDetailForm}},[e._v("刷新")])],1),e._v(" "),a("el-form",{ref:"refDetailForm",staticClass:"form-container",attrs:{model:e.detailForm,rules:e.rules,"show-message":!1,"label-width":"120px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("basic-validate-status",{attrs:{model:e.detailForm}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编码"}},[a("el-input",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:"系统自动生成合同编码"},model:{value:e.detailForm.code,callback:function(t){e.$set(e.detailForm,"code",t)},expression:"detailForm.code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"原始合同号",prop:"orignalCode","hide-required-asterisk":""}},[a("el-input",{ref:"refOrignalCode",attrs:{disabled:e.disabledFlag,size:"small",clearable:"",placeholder:"请输入原始合同号",maxlength:"100"},model:{value:e.detailForm.orignalCode,callback:function(t){e.$set(e.detailForm,"orignalCode",t)},expression:"detailForm.orignalCode"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同名称",prop:"name","hide-required-asterisk":""}},[a("el-input",{ref:"refName",attrs:{disabled:e.disabledFlag,size:"small",clearable:"",placeholder:"请输入合同名称",maxlength:"100"},model:{value:e.detailForm.name,callback:function(t){e.$set(e.detailForm,"name",t)},expression:"detailForm.name"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品开发单位"}},[a("el-input",{ref:"refPerson",attrs:{disabled:!0,size:"small",clearable:"",placeholder:"请输入产品开发单位",maxlength:"100"},model:{value:e.detailForm.devOrgName,callback:function(t){e.$set(e.detailForm,"devOrgName",t)},expression:"detailForm.devOrgName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品服务单位",prop:"serviceOrgName","hide-required-asterisk":""}},[a("el-input",{attrs:{disabled:e.disabledFlag,size:"small",readonly:"",placeholder:"请选择产品服务单位"},model:{value:e.detailForm.serviceOrgName,callback:function(t){e.$set(e.detailForm,"serviceOrgName",t)},expression:"detailForm.serviceOrgName"}},[a("el-button",{staticClass:"form-btn",attrs:{slot:"append",disabled:e.disabledFlag,size:"small",icon:"el-icon-plus"},on:{click:function(t){e.toipClick("org")}},slot:"append"})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"产品使用单位",prop:"useOrgName","hide-required-asterisk":""}},[a("el-input",{attrs:{disabled:e.disabledFlag,size:"small",readonly:"",placeholder:"请选择产品使用单位"},model:{value:e.detailForm.useOrgName,callback:function(t){e.$set(e.detailForm,"useOrgName",t)},expression:"detailForm.useOrgName"}},[a("el-button",{staticClass:"form-btn",attrs:{slot:"append",disabled:e.disabledFlag,size:"small",icon:"el-icon-plus"},on:{click:function(t){e.toipClick("unit")}},slot:"append"})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",class:{disabled:e.disabledFlag},attrs:{label:"授权模式",prop:"authModel"}},[a("el-radio-group",{model:{value:e.detailForm.authModel,callback:function(t){e.$set(e.detailForm,"authModel",t)},expression:"detailForm.authModel"}},e._l(e.dataEnum.auth,(function(t){return a("el-radio",{key:t.code,attrs:{disabled:e.disabledFlag,label:parseInt(t.code)}},[e._v("\n              "+e._s(t.name)+"\n            ")])})))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"add-border",class:{disabled:e.disabledFlag},attrs:{label:"授权方式",prop:"authWay"}},[a("el-radio-group",{model:{value:e.detailForm.authWay,callback:function(t){e.$set(e.detailForm,"authWay",t)},expression:"detailForm.authWay"}},e._l(e.dataEnum.static.authModeType,(function(t){return a("el-radio",{key:t.code,attrs:{disabled:e.disabledFlag,label:parseInt(t.code)}},[e._v("\n              "+e._s(t.name)+"\n            ")])})))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权数",prop:"authNum"}},[a("el-input",{attrs:{disabled:e.disabledFlag,clearable:"",size:"small",min:"0",maxlength:"100",placeholder:"请输入授权数"},model:{value:e.detailForm.authNum,callback:function(t){e.$set(e.detailForm,"authNum",t)},expression:"detailForm.authNum"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权开始",prop:"authBeginTime"}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,disabled:e.disabledFlag,size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp",placeholder:"选择时间"},on:{change:e.changeBeginTime},model:{value:e.detailForm.authBeginTime,callback:function(t){e.$set(e.detailForm,"authBeginTime",t)},expression:"detailForm.authBeginTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"授权截至",prop:"authEndTime"}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,disabled:e.disabledFlag,size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"timestamp",placeholder:"选择时间"},on:{change:e.changeEndTime},model:{value:e.detailForm.authEndTime,callback:function(t){e.$set(e.detailForm,"authEndTime",t)},expression:"detailForm.authEndTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约金额"}},[a("basic-input",{attrs:{"format-value":e.formatToMoney,format:e.formatToThousands,disabled:e.disabledFlag,min:0,clearable:"",price:"",placeholder:"请输入签约金额"},model:{value:e.detailForm.signPrice,callback:function(t){e.$set(e.detailForm,"signPrice",t)},expression:"detailForm.signPrice"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约日期"}},[a("el-date-picker",{attrs:{editable:!1,clearable:!1,disabled:e.disabledFlag,size:"small",type:"date","value-format":"timestamp",placeholder:"选择日期"},model:{value:e.detailForm.signDate,callback:function(t){e.$set(e.detailForm,"signDate",t)},expression:"detailForm.signDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票类型"}},[a("el-select",{staticClass:"mode-select",attrs:{disabled:e.disabledFlag,size:"small",placeholder:"请选择发票类型"},on:{change:function(t){e.detailForm.invoiceTypeId=e.dataDictionary.invoiceType.data.filter((function(t){return t.name==e.detailForm.invoiceType}))[0].id}},model:{value:e.detailForm.invoiceType,callback:function(t){e.$set(e.detailForm,"invoiceType",t)},expression:"detailForm.invoiceType"}},e._l(e.dataDictionary.invoiceType.data,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发票税率"}},[a("basic-input",{attrs:{"format-value":e.formatToMoney,format:e.formatToThousands,disabled:e.disabledFlag||"无"===e.detailForm.invoiceType,min:0,max:1,clearable:"",placeholder:"请输入发票税率",price:""},on:{change:e.changeInvoiceTaxRate},model:{value:e.detailForm.invoiceTaxRate,callback:function(t){e.$set(e.detailForm,"invoiceTaxRate",t)},expression:"detailForm.invoiceTaxRate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商务人员"}},[a("el-input",{attrs:{disabled:e.disabledFlag,clearable:"",size:"small",min:"0",maxlength:"100",placeholder:"请输入商务人员"},model:{value:e.detailForm.busPerson,callback:function(t){e.$set(e.detailForm,"busPerson",t)},expression:"detailForm.busPerson"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"合同摘要"}},[a("el-input",{attrs:{disabled:e.disabledFlag,autosize:{minRows:6,maxRows:8},maxlength:"5000",size:"small",clearable:"",type:"textarea",placeholder:"请输入合同摘要，不超过5000字"},model:{value:e.detailForm.summary,callback:function(t){e.$set(e.detailForm,"summary",t)},expression:"detailForm.summary"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"补充说明"}},[a("el-input",{attrs:{disabled:e.disabledFlag,autosize:{minRows:6,maxRows:8},maxlength:"5000",size:"small",clearable:"",type:"textarea",placeholder:"请输入补充说明，不超过5000字"},model:{value:e.detailForm.remark,callback:function(t){e.$set(e.detailForm,"remark",t)},expression:"detailForm.remark"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"add-border file",attrs:{label:"附件"}},[a("basic-upload",{ref:"refBasicUpload",attrs:{disabled:e.disabledFlag,"form-id":e.detailFormId}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"登记人员"}},[a("el-input",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:"系统自动生成登记人员"},model:{value:e.detailForm.inputPerson,callback:function(t){e.$set(e.detailForm,"inputPerson",t)},expression:"detailForm.inputPerson"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"登记时间"}},[a("el-input",{attrs:{disabled:!0,size:"small",clearable:"",placeholder:"系统自动生成登记时间"},model:{value:e.detailForm.inputTime,callback:function(t){e.$set(e.detailForm,"inputTime",t)},expression:"detailForm.inputTime"}})],1)],1)],1)],1),e._v(" "),a("basic-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.visibleSyncOrg,title:"产品服务单位-选择"},on:{"update:visible":function(t){e.visibleSyncOrg=t}}},[e.visibleSyncOrg?a("dialog-organization",{on:{selectionChange:e.selectionChange}}):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visibleSyncOrg=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleChange}},[e._v("确 定")])],1)],1),e._v(" "),a("basic-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.visibleSyncUnit,title:"产品使用单位-选择"},on:{"update:visible":function(t){e.visibleSyncUnit=t}}},[e.visibleSyncUnit?a("dialog-unit",{on:{selectionChange:e.selectionChange}}):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visibleSyncUnit=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleChange}},[e._v("确 定")])],1)],1)],1)};i._withStripped=!0;var l=a(62),s=a.n(l),r=a(63),n=a.n(r),o=a(5),d=a.n(o),c=a(55),m=a(56),u=a(57),g=a(59),p=a(33),h=a(60),f=a(34);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={name:"BusinessContractDetail",components:{dialogOrganization:function(){return a.e("custormManager/null").then(a.bind(null,85))},dialogUnit:function(){return a.e("custormManager/null").then(a.bind(null,84))}},mixins:[c.a,m.a,u.a,g.a],props:{isUpdateAuthWorkFlow:{type:Boolean,default:function(){return!0}},reserve:null},data:function(){return{addBtnShowFlag:!0,saveBtnShowFlag:!0,deleteBtnShowFlag:!0,auditBtnShowFlag:!0,apiParams:{productAlias:"smartpm",pageCode:"sysBusContractMaster"},detailFormId:void 0,detailForm:{},saveBtnDisabledFlag:!0,rules:{orignalCode:[{required:!0,validator:function(e,t,a){Object(h.c)(e,t,a,!0,["原始合同号",1,100])},trigger:"change"}],name:[{required:!0,validator:function(e,t,a){Object(h.c)(e,t,a,!0,["合同名称",1,100])},trigger:"change"}],authNum:[{required:!0,validator:function(e,t,a){Object(h.c)(e,t,a,!0,["授权数",1,20])},trigger:"change"},{required:!0,validator:function(e,t,a){Object(h.e)(e,t,a,!0,["授权数"],h.a)},trigger:"change"}],serviceOrgName:[{required:!0,message:"请选择产品服务单位",trigger:"change"}],useOrgName:[{required:!0,message:"请选择产品使用单位",trigger:"change"}],authBeginTime:[{required:!0,message:"请选择授权开始时间",trigger:"change"}],authEndTime:[{required:!0,message:"请选择授权结束时间",trigger:"change"}]},type:null,visibleSyncOrg:!1,visibleSyncUnit:!1,selectedRow:{}}},computed:{deleteBtnDisabledFlag:function(){return!(2===this.detailForm.validateStatus&&this.detailForm.id)},auditBtnDisabledFlag:function(){if(this.validateStatus)return(5!=this.detailForm.validateStatus||1!=this.reserve)&&this.validateStatus.map((function(e){return Number(e.code)})).includes(this.detailForm.validateStatus)},disabledFlag:function(){return this.auditBtnDisabledFlag},validateStatus:function(){return Array.isArray(this.dataEnum.auditStatusEnum)?this.dataEnum.auditStatusEnum.filter((function(e){return 1==e.code||3==e.code||4==e.code||5==e.code})):{}}},watch:{detailForm:{handler:function(){this.saveBtnDisabledFlag=!1},deep:!0}},deactivated:function(){this.$store.dispatch("cacheId",void 0)},activated:function(){var e=this;this.$utilsBasic.loadAddAndDetailData(this,(function(){e.$route.params&&(e.detailFormId=e.$route.params.id?e.$route.params.id:void 0),e.handleAddBtn()}),(function(t){e.detailFormId=t,e.getDetailForm()}))},created:function(){this.getEnumData(["GetAuditStatusEnum","GetAuthData","GetInvoiceTypeList"]),this.$store.dispatch("cacheId","0")},methods:{handleAddBtn:function(){this.addDetailForm(),this.$nextTick((function(){}))},handleSaveBtn:function(){var e=this;this.validateAfter((function(){e.saveDetailForm().catch((function(e){console.log(e)}))}))},handleDeleteBtn:function(){var e=this;this.$confirm(p.a.info.delete,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$utils.isEmpty(e.detailFormId)?e.addDetailForm():e.deleteDetailForm().then((function(){e.addDetailForm()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},handleAuditBtn:function(){var e=this;this.$confirm(p.a.info.audit,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.validateAfter((function(){e.saveDetailForm(!0).then((function(){e.auditDetailForm()}))}))})).catch((function(e){console.log(e)}))},validateAfter:function(e){var t=!0;if(this.$refs.refDetailForm.validate((function(e){return!e&&(t=e),!t})),!t)return this.$message({message:p.a.info.updateEmptyError,type:"warning"}),this.$utilsBasic.valideFocus(this,["refOrignalCode","refName","refPerson"]);"function"==typeof e&&e()},toipClick:function(e){this.disabled||(this.type=e,this["visibleSync"+e.replace(/(^[\w\W])/,(function(e){return e.toLocaleUpperCase()}))]=!0)},selectionChange:function(e){this.selectedRow=e.selectedRow},handleChange:function(){var e=this.selectedRow;if(!this.isSelectedRow(e))return!1;if(0!==Object.keys(e).length){switch(this.type){case"org":this.detailForm=Object.assign({},this.detailForm,{serviceOrgName:e.name,serviceOrgId:e.id});break;case"unit":this.detailForm=Object.assign({},this.detailForm,{useOrgName:e.name,useOrgId:e.id})}this.saveBtnDisabledFlag=!1,this["visibleSync"+this.type.replace(/(^[\w\W])/,(function(e){return e.toLocaleUpperCase()}))]=!1}},addDetailForm:function(){var e=this;this.$nextTick((function(){e.detailFormId=void 0,e.detailForm={id:"",validateStatus:2,handEndDate:(new Date).getTime(),devOrgName:e.$store.state.user.login.orgName,devOrgId:e.$store.state.user.login.orgId,authModel:2,authWay:1,authNum:10,authBeginTime:(new Date).getTime(),authEndTime:(new Date).getTime(),signDate:(new Date).getTime(),invoiceTaxRate:"0.00",inputPerson:e.userLogin.inputPersonFullPath,inputTime:e.$utils.date.format(new Date,"YYYY-MM-DD hh:mm:ss")}})),this.$refs.refDetailForm.resetFields(),this.$refs.refOrignalCode.focus(),console.log("this.detailForm",this.detailForm)},getDetailForm:function(){var e=this;if(this.detailFormId)return f.a.static.getObjDetail(v({},this.apiParams,{field:{id:this.detailFormId}})).then((function(t){t.rel?(console.log("表单内容",t),e.detailForm=t.data,e.$set(e.detailForm,"authBeginTime",new Date(t.data.authBeginTime).getTime()),e.$set(e.detailForm,"authEndTime",new Date(t.data.authEndTime).getTime()),e.$set(e.detailForm,"signDate",new Date(t.data.signDate).getTime()),e.$nextTick((function(){}))):e.$message({message:t.message,type:"warning"})})).catch((function(e){console.log(e)}));this.addDetailForm()},saveDetailForm:function(e){var t=this,a=this.$utils.copy(this.detailForm);return this.$utils.isEmpty(this.detailFormId)?f.a.static.postObj(v({},this.apiParams,{field:a})).then(function(){var a=n()(s.a.mark((function a(i){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.status||200!==i.status){a.next=15;break}return console.log("保存成功",i),t.detailForm.id=i.data.id,t.detailFormId=i.data.id,t.detailForm=i.data,t.$set(t.detailForm,"authBeginTime",new Date(i.data.authBeginTime).getTime()),t.$set(t.detailForm,"authEndTime",new Date(i.data.authEndTime).getTime()),t.$set(t.detailForm,"signDate",new Date(i.data.signDate).getTime()),a.next=10,t.$refs.refBasicUpload.submitUpload(i.data);case 10:if(a.sent){a.next=12;break}return a.abrupt("return",!1);case 12:e||t.$message.success(i.message),a.next=16;break;case 15:t.$message({message:i.message,type:"warning"});case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)})):f.a.static.putObj(v({},this.apiParams,{field:a})).then(function(){var a=n()(s.a.mark((function a(i){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!i.status||200!==i.status){a.next=13;break}return t.detailForm=i.data,t.$set(t.detailForm,"authBeginTime",new Date(i.data.authBeginTime).getTime()),t.$set(t.detailForm,"authEndTime",new Date(i.data.authEndTime).getTime()),t.$set(t.detailForm,"signDate",new Date(i.data.signDate).getTime()),console.log("修改成功",i),a.next=8,t.$refs.refBasicUpload.submitUpload(i.data);case 8:if(a.sent){a.next=10;break}return a.abrupt("return",!1);case 10:e||t.$message.success(i.message),a.next=14;break;case 13:t.$message({message:i.message,type:"warning"});case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},deleteDetailForm:function(){var e=this;return f.a.static.deleteObj(v({},this.apiParams,{field:{id:this.detailFormId}})).then((function(t){t.status&&200===t.status?(e.$message.success(t.message),e.$refs.refBasicUpload.clearAttacheFile()):e.$message({message:t.message,type:"warning"})})).catch((function(e){console.log(e)}))},auditDetailForm:function(){var e=this;return console.log("this.detailForm",this.detailForm),f.a.static.putObjAudit(v({},this.apiParams,{field:this.detailForm})).then((function(t){if(console.log("audit res",t),t.status&&200===t.status){if(e.detailForm=t.data,e.$set(e.detailForm,"authBeginTime",new Date(t.data.authBeginTime).getTime()),e.$set(e.detailForm,"authEndTime",new Date(t.data.authEndTime).getTime()),e.$set(e.detailForm,"signDate",new Date(t.data.signDate).getTime()),t.data.processInstanceId)return e.$store.dispatch("OpenSelectUserAndHandleAudit",{processId:t.data.processInstanceId,formData:t.data}).then((function(){e.$message.success(t.message)}));e.$message.success(t.message)}else e.$message({message:t.message,type:"warning"})})).catch((function(e){console.log(e)}))},changeInvoiceTaxRate:function(){(this.detailForm.invoiceTaxRate<0||this.detailForm.invoiceTaxRate>1)&&(this.detailForm.invoiceTaxRate="0",this.$message({message:p.a.info.invoiceTaxRate,type:"warning"}))},changeBeginTime:function(e){console.log("changeBeginTime",e,this.detailForm.authEndTime),e>this.detailForm.authEndTime&&(this.$message({message:"开始时间不能大于结束时间",type:"warning"}),this.$set(this.detailForm,"authBeginTime",null))},changeEndTime:function(e){e<this.detailForm.authBeginTime&&(this.$message({message:"结束时间不能小于开始时间",type:"warning"}),this.$set(this.detailForm,"authEndTime",null))}}},y=a(54),T=Object(y.a)(F,i,[],!1,null,null,null);T.options.__file="src/products/custormManager/views/sysInfo/businessManager/businessContract/detail.vue";t.default=T.exports}}]);